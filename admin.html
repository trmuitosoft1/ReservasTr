<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <title>Administra√ß√£o - Pratos</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <div class="logo">
      <img src="TRSOFT_20novo.png" alt="TRSoft Logo" />
    </div>
    <h1>Gest√£o de Pratos</h1>
  </header>

  <main class="container" id="loginSection">
    <h2>Login de Administrador</h2>
    <input type="password" id="senha" placeholder="Senha de administrador">
    <button onclick="verificarSenha()">Entrar</button>
  </main>

  <main class="container" id="adminSection" style="display: none;">
    <h2>Adicionar / Editar Prato</h2>
    <form id="formPrato">
      <input type="hidden" id="nomeOriginal">
      <label>Nome do prato:</label>
      <input type="text" id="nome" required>

      <label>Descri√ß√£o:</label>
      <input type="text" id="descricao" required>

      <label>URL da imagem:</label>
      <input type="url" id="imagem" required>

      <button type="submit">Salvar Prato</button>
    </form>

    <h2>Lista de Pratos</h2>
    <div id="listaPratos"></div>
  </main>

  <script src="admin.js"></script>
</body>
</html>

üß† admin.js

const urlScript = "URL_DO_TEU_SCRIPT"; // Substitui aqui pela tua URL do Apps Script
const senhaCorreta = "admin123"; // Troca para a tua senha real

function verificarSenha() {
  const senha = document.getElementById("senha").value;
  if (senha === senhaCorreta) {
    document.getElementById("loginSection").style.display = "none";
    document.getElementById("adminSection").style.display = "block";
    carregarPratos();
  } else {
    alert("Senha incorreta");
  }
}

document.getElementById("formPrato").addEventListener("submit", function(e) {
  e.preventDefault();

  const nome = document.getElementById("nome").value;
  const descricao = document.getElementById("descricao").value;
  const imagem = document.getElementById("imagem").value;
  const nomeOriginal = document.getElementById("nomeOriginal").value;

  const params = new URLSearchParams();
  params.append("action", nomeOriginal ? "editPrato" : "addPrato");
  params.append("nome", nome);
  params.append("descricao", descricao);
  params.append("imagem", imagem);
  if (nomeOriginal) params.append("nomeOriginal", nomeOriginal);

  fetch(`${urlScript}?${params.toString()}`, { method: "POST" })
    .then(() => {
      alert("Prato salvo com sucesso!");
      document.getElementById("formPrato").reset();
      document.getElementById("nomeOriginal").value = "";
      carregarPratos();
    });
});

function carregarPratos() {
  fetch(`${urlScript}?action=getPratos`, { method: "POST" })
    .then(res => res.json())
    .then(pratos => {
      const container = document.getElementById("listaPratos");
      container.innerHTML = "";
      pratos.forEach(prato => {
        const card = document.createElement("div");
        card.className = "prato";

        card.innerHTML = `
          <img src="${prato.Imagem}" alt="${prato.Nome}" />
          <h4>${prato.Nome}</h4>
          <p>${prato.Descri√ß√£o}</p>
          <p><strong>Ativo:</strong> ${prato.Ativo}</p>
          <button onclick="editarPrato('${prato.Nome}', '${prato.Descri√ß√£o}', '${prato.Imagem}')">Editar</button>
          <button onclick="alternarPrato('${prato.Nome}')">${prato.Ativo === "Sim" ? "Ocultar" : "Ativar"}</button>
        `;
        container.appendChild(card);
      });
    });
}

function editarPrato(nome, descricao, imagem) {
  document.getElementById("nome").value = nome;
  document.getElementById("descricao").value = descricao;
  document.getElementById("imagem").value = imagem;
  document.getElementById("nomeOriginal").value = nome;
}

function alternarPrato(nome) {
  const params = new URLSearchParams();
  params.append("action", "togglePrato");
  params.append("nome", nome);

  fetch(`${urlScript}?${params.toString()}`, { method: "POST" })
    .then(() => carregarPratos());
}
